{"version":3,"sources":["../../src/ads/ad-unit.tsx","../../src/ads/ad-slots.ts"],"names":["useRef","useState","useEffect","jsxs","Fragment","jsx"],"mappings":"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","file":"index.js","sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState } from 'react';\nimport type { AdUnitProps } from './types';\n\ndeclare global {\n  interface Window {\n    adsbygoogle: any[];\n  }\n}\n\n/**\n * AdSense ad unit component with lazy loading and development placeholders\n * @param slot - Ad slot identifier\n * @param adType - Type of ad (leaderboard, rectangle, etc.)\n * @param className - Additional CSS classes\n * @param adClient - AdSense client ID (defaults to env var)\n */\nexport function AdUnit({\n  slot,\n  adType = 'custom',\n  format = 'auto',\n  style = { display: 'block' },\n  className = '',\n  responsive = true,\n  adClient,\n}: AdUnitProps) {\n  const adRef = useRef<HTMLModElement>(null);\n  const [adsMode, setAdsMode] = useState<string>('NONE');\n\n  // Fetch ads mode from API route (server-side env var)\n  useEffect(() => {\n    fetch('/api/ads-config')\n      .then((res) => res.json())\n      .then((data) => setAdsMode(data.adsMode || 'NONE'))\n      .catch((err) => {\n        console.error('Failed to fetch ads config:', err);\n      });\n  }, []);\n\n  // Simple ad loading with proper timing\n  useEffect(() => {\n    if (adsMode !== 'SHOW_ADS') {\n      return;\n    }\n\n    const loadAd = () => {\n      try {\n        if (typeof window !== 'undefined' && window.adsbygoogle) {\n          (window.adsbygoogle = window.adsbygoogle || []).push({});\n        }\n      } catch (error) {\n        console.error('AdSense error for slot', slot, ':', error);\n      }\n    };\n\n    if (document.readyState === 'complete') {\n      setTimeout(loadAd, 100);\n    } else {\n      window.addEventListener(\n        'load',\n        () => {\n          setTimeout(loadAd, 100);\n        },\n        { once: true }\n      );\n    }\n  }, [adsMode, slot]);\n\n  // Return nothing if ads are completely disabled\n  if (adsMode === 'NONE') {\n    return null;\n  }\n\n  const clientId = adClient || process.env.NEXT_PUBLIC_ADSENSE_CLIENT_ID || '';\n\n  // Show placeholder when ADS_MODE=SHOW_PLACEHOLDER\n  if (adsMode === 'SHOW_PLACEHOLDER') {\n    // Handle leaderboard responsively in development\n    if (adType === 'leaderboard') {\n      return (\n        <>\n          {/* Desktop Leaderboard Placeholder */}\n          <div className={`hidden md:flex justify-center ${className}`}>\n            <div\n              className=\"bg-blue-500 border-2 border-blue-300 p-4 text-white text-center font-medium rounded-lg\"\n              style={{ width: 728, height: 90, minHeight: '80px' }}\n            >\n              <div className=\"text-sm\">ðŸ“º Ad Placeholder</div>\n              <div className=\"text-xs\">leaderboard (desktop)</div>\n              <div className=\"text-xs\">Slot: {slot}</div>\n              <div className=\"text-xs\">728x90</div>\n            </div>\n          </div>\n\n          {/* Mobile Banner Placeholder */}\n          <div className={`flex md:hidden justify-center ${className}`}>\n            <div\n              className=\"bg-blue-500 border-2 border-blue-300 p-4 text-white text-center font-medium rounded-lg\"\n              style={{ width: 320, height: 50, minHeight: '80px' }}\n            >\n              <div className=\"text-sm\">ðŸ“º Ad Placeholder</div>\n              <div className=\"text-xs\">mobile-banner</div>\n              <div className=\"text-xs\">Slot: {slot}</div>\n              <div className=\"text-xs\">320x50</div>\n            </div>\n          </div>\n        </>\n      );\n    }\n\n    // Other ad types - set responsive max-width\n    let devWidth = 300;\n    let devHeight = 250;\n\n    if (adType === 'sidebar') {\n      devWidth = 300;\n      devHeight = 600;\n    } else if (adType === 'mobile-banner') {\n      devWidth = 320;\n      devHeight = 50;\n    } else if (adType === 'mobile-large') {\n      devWidth = 320;\n      devHeight = 100;\n    }\n\n    return (\n      <div className={`flex justify-center ${className}`}>\n        <div\n          className=\"bg-blue-500 border-2 border-blue-300 p-4 text-white text-center font-medium rounded-lg max-w-full\"\n          style={{\n            width: Math.min(devWidth, 300),\n            height: devHeight,\n            minHeight: '80px',\n          }}\n        >\n          <div className=\"text-sm\">ðŸ“º Ad Placeholder</div>\n          <div className=\"text-xs\">{adType}</div>\n          <div className=\"text-xs\">Slot: {slot}</div>\n          <div className=\"text-xs\">\n            {Math.min(devWidth, 300)}x{devHeight}\n          </div>\n          <div className=\"text-xs mt-1\">Set ADS_MODE=SHOW_ADS for real ads</div>\n        </div>\n      </div>\n    );\n  }\n\n  // Real AdSense ads (ADS_MODE=SHOW_ADS)\n  if (adType === 'leaderboard') {\n    return (\n      <div\n        className={`ad-container ${className}`}\n        style={{ display: 'inline-block', width: '100%', minWidth: '320px' }}\n      >\n        <div className=\"text-xs text-slate-500 mb-1 text-center\">\n          Advertisement\n        </div>\n        <ins\n          ref={adRef}\n          className=\"adsbygoogle\"\n          style={{ display: 'block', width: '100%' }}\n          data-ad-client={clientId}\n          data-ad-slot={slot}\n          data-ad-format=\"auto\"\n          data-full-width-responsive={responsive ? 'true' : 'false'}\n        />\n      </div>\n    );\n  }\n\n  // Default rectangle ad with mobile safety\n  return (\n    <div\n      className={`ad-container ${className}`}\n      style={{ display: 'inline-block', width: '100%', minWidth: '300px' }}\n    >\n      <div className=\"text-xs text-slate-500 mb-1 text-center\">\n        Advertisement\n      </div>\n      <ins\n        ref={adRef}\n        className=\"adsbygoogle\"\n        style={{ display: 'block', width: '100%' }}\n        data-ad-client={clientId}\n        data-ad-slot={slot}\n        data-ad-format=\"auto\"\n        data-full-width-responsive={responsive ? 'true' : 'false'}\n      />\n    </div>\n  );\n}\n","import type { AdSlots, AdSlotName } from './types';\n\n/**\n * Create an ad slots registry\n * @param slots - Object mapping slot names to AdSense ad unit IDs\n */\nexport function createAdSlots(slots: AdSlots) {\n  return {\n    slots,\n    getAdSlotId(slotName: AdSlotName): string {\n      const id = slots[slotName];\n      if (!id) {\n        console.warn(`Ad slot \"${slotName}\" not found in registry`);\n        return '';\n      }\n      return id;\n    },\n    hasSlot(slotName: AdSlotName): boolean {\n      return slotName in slots;\n    },\n    getAllSlots(): AdSlots {\n      return { ...slots };\n    },\n  };\n}\n\n/**\n * Example ad slots configuration\n * Replace with your actual AdSense ad unit IDs\n */\nexport const defaultAdSlots = createAdSlots({\n  'homepage-banner': '1234567890',\n  'homepage-mid-content': '2345678901',\n  'sidebar-ad': '3456789012',\n  'article-content': '4567890123',\n  'article-end': '5678901234',\n});\n\n/**\n * Get ad slot ID from slot name\n * @param slotName - Name of the ad slot\n * @param slots - Ad slots registry (optional, uses default if not provided)\n */\nexport function getAdSlotId(\n  slotName: AdSlotName,\n  slots: AdSlots = defaultAdSlots.getAllSlots()\n): string {\n  return slots[slotName] || '';\n}\n"]}